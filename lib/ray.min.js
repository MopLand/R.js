/*!
*	(C)2021 VeryIDE
*	http://www.veryide.com/
*	ray.js 核心框架
*	$Id: ray.js 2021/09/08 Lay $
*/
(function(x,y){var d=function(a,b){return new d.init(a,b)};d.timestamp=(new Date).getTime();d.Browser={webp:!1,msie:!1,opera:!1,safari:!1,chrome:!1,wechat:!1,firefox:!1};var w=navigator,r=w.userAgent,u="";switch(w.appName){case "Microsoft Internet Explorer":d.Browser.name="ie";d.Browser.msie=!0;u=/^.+MSIE (\d+\.\d+);.+$/;break;default:-1!=r.indexOf("Chrome")?(d.Browser.name="chrome",d.Browser.chrome=!0,u=/^.+Chrome\/([\d.]+?)([\s].*)$/ig):-1!=r.indexOf("Safari")?(d.Browser.name="safari",d.Browser.safari=!0,u=/^.+Version\/([\d\.]+?) (Mobile.)?Safari.+$/):-1!=r.indexOf("Opera")?(d.Browser.name="opera",d.Browser.opera=!0,u=/^.{0,}Opera\/(.+?) \(.+$/):(d.Browser.name="firefox",d.Browser.firefox=!0,u=/^.+Firefox\/([\d\.]+).{0,}$/)}d.Browser.version=r.replace(u,"$1");d.Browser.lang=(d.Browser.msie?w.browserLanguage:w.language).toLowerCase();d.Browser.mobile=/(iPhone|iPad|iPod|Android)/i.test(r);if(ret=/MicroMessenger\/([\d\.]+)/ig.exec(r))d.Browser.wechat=ret[1];var t=y.createElement("canvas");t.getContext&&t.getContext("2d")&&(d.Browser.webp=0==t.toDataURL("image/webp").indexOf("data:image/webp"));"undefined"===typeof HTMLElement||"outerHTML"in HTMLElement.prototype||(HTMLElement.prototype.__defineGetter__("outerHTML",function(){for(var a=this.attributes,b="\x3c"+this.tagName,c=0;c<a.length;c++)a[c].specified&&(b+=" "+a[c].name+'\x3d"'+a[c].value+'"');return this.canHaveChildren?b+"\x3e"+this.innerHTML+"\x3c/"+this.tagName+"\x3e":b+" /\x3e"}),HTMLElement.prototype.__defineSetter__("outerHTML",function(a){var b=this.ownerDocument.createRange();b.setStartBefore(this);b=b.createContextualFragment(a);this.parentNode.replaceChild(b,this);return a}),HTMLElement.prototype.__defineGetter__("canHaveChildren",function(){return!/^(area|base|basefont|col|frame|hr|img|br|input|isindex|link|meta|param)$/.test(this.tagName.toLowerCase())}));/rv\:(.*?)\)\s+gecko\//i.test(r)&&(HTMLElement.prototype.__defineGetter__("innerText",function(){return this.textContent}),HTMLElement.prototype.__defineSetter__("innerText",function(a){this.textContent=a}),HTMLElement.prototype.insertAdjacentElement=function(a,b){if(a&&b)switch(a){case "beforeEnd":this.appendChild(b);break;case "beforeBegin":this.parentNode.insertBefore(b,this);break;case "afterBegin":this.firstChild?this.insertBefore(b,this.firstChild):this.appendChild(b);break;case "afterEnd":this.nextSibling?this.parentNode.insertBefore(b,this.nextSibling):this.parentNode.appendChild(b)}},HTMLElement.prototype.insertAdjacentHTML=function(a,b){a&&b&&this.insertAdjacentElement(a,document.createRange().createContextualFragment(b))});window.Node&&(Node.prototype.replaceNode=function(a){this.parentNode.replaceChild(a,this)},Node.prototype.removeNode=function(a){if(a)return this.parentNode.removeChild(this);a=document.createRange();a.selectNodeContents(this);return this.parentNode.replaceChild(a.extractContents(),this)},Node.prototype.swapNode=function(a){var b=this.parentNode,c=this.nextSibling;a=a.parentNode.replaceChild(this,a);a==c?b.insertBefore(c,this):c?b.insertBefore(a,c):b.appendChild(a);return this});d.$=function(a){return document.getElementById(a)};d.reader=function(a){d(window).bind("load",function(){a((new Date).getTime()-d.time)})};d.resize=function(a){d(window).bind("resize",a)};d.Cookie={get:function(a){var b=document.cookie.match(new RegExp(a+"\x3d[a-zA-Z0-9.()\x3d|%/]+($|;)","g"));return b&&b[0]?unescape(b[0].substring(a.length+1,b[0].length).replace(";",""))||null:null},set:function(a,b,c,h,f,g){a=[a+"\x3d"+escape(b),"path\x3d"+(h&&""!=h?h:"/"),"domain\x3d"+(f&&""!=f?f:window.location.hostname)];c&&a.push(d.Cookie.hoursToExpireDate(c));g&&a.push("secure");return document.cookie=a.join("; ")},unset:function(a,b,c){b=b&&"string"==typeof b?b:"";c=c&&"string"==typeof c?c:"";d.Cookie.get(a)&&d.Cookie.set(a,"","Thu, 01-Jan-70 00:00:01 GMT",b,c)},hoursToExpireDate:function(a){if("NaN"==parseInt(a))return"";var b=new Date;b.setTime(b.getTime()+36E5*parseInt(a));return b.toGMTString()},clear:function(){var a=document.cookie.match(/[^ =;]+(?=\=)/g);if(a)for(var b=a.length;b--;)d.Cookie.unset(a[b])}};d.template=function(a,b){try{return"object"==typeof a&&(a=a.innerHTML),(new Function("obj","var p\x3d[],print\x3dfunction(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<%=(.+?)%>/g,"',$1,'").split("\x3c%").join("');").split("%\x3e").join("p.push('")+"');}return p.join('');"))(b)}catch(c){console.log(c.message)}};d.getViewportSize=function(){var a={width:0,height:0};void 0!==window.innerWidth?a={width:window.innerWidth,height:window.innerHeight}:a={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight};return a};d.getClinetRect=function(a){a=a.getBoundingClientRect();return a=a={left:a.left,right:a.right,top:a.top,bottom:a.bottom,height:a.height||a.bottom-a.top,width:a.width||a.right-a.left}};d.getScrollPosition=function(){var a={left:0,top:0};window.pageYOffset?a={left:window.pageXOffset,top:window.pageYOffset}:"undefined"!=typeof document.documentElement.scrollTop&&0<document.documentElement.scrollTop?a={left:document.documentElement.scrollLeft,top:document.documentElement.scrollTop}:"undefined"!=typeof document.body.scrollTop&&(a={left:document.body.scrollLeft,top:document.body.scrollTop});return a};d.Array=function(a){var b=function(a){this.self=a;return this};b.prototype={slice:[].slice,first:function(){return this.self[0]},last:function(){return this.self[this.self.length-1]},max:function(){return Math.max.apply(null,this.self)},min:function(){return Math.min.apply(null,this.self)},sum:function(){for(var a=0,b=0;a<this.self.length;b+=isNaN(parseInt(this.self[a]))?0:parseInt(this.self[a]),a++);return b},indexOf:function(a){for(var c=this.self.length,b=0;b<=c;b++)if(this.self[b]==a)return b;return-1}};return new b(a)};d.String=function(a){var b=function(a){this.self=String(a||"");return this};b.prototype={pad:function(a,b,f){var c=this.self.toString();return b||(b=" "),0<(a-=c.length)?(b=Array(Math.ceil(a/b.length)+1).join(b)).substr(0,f=f?1==f?0:Math.ceil(a/2):a)+c+b.substr(0,a-f):c},length:function(){return String(this.self).replace(/[^\x00-\xff]/g,"ci").length},trim:function(){return this.self.replace(/(^\s*)|(\s*$)/g,"")},leftTrim:function(){return this.self.replace(/(^\s*)/g,"")},rightTrim:function(){return this.self.replace(/(\s*$)/g,"")},stripScript:function(){return this.self.replace(/<script.*?>.*?<\/script>/ig,"")},stripTags:function(a){a=(((a||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");return this.self.replace(/\x3c!--[\s\S]*?--\x3e|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,function(c,b){return-1<a.indexOf("\x3c"+b.toLowerCase()+"\x3e")?c:""})},stripTags:function(){return String(this.self).replace(/<[^>]+>/g,"")},unicode:function(){for(var a="",b=0;b<this.self.length;b++)a+="\x26#"+this.self.charCodeAt(b)+";";return a},ascii:function(){var a=this.self.match(/&#(\d+);/g);if(null!=a){for(var b="",f=0;f<a.length;f++)b+=String.fromCharCode(a[f].replace(/[&#;]/g,""));return b}},format:function(){for(var a=[],b=0,f=arguments.length;b<f;b++)a.push(arguments[b]);return this.self.replace(/\{(\d+)\}/g,function(b,c){return a[c]})},encodeHTML:function(){return this.self.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/"/g,"\x26quot;").replace(/'/g,"\x26#39;")},decodeHTML:function(){return this.self.replace(/&quot;/g,'"').replace(/&lt;/g,"\x3c").replace(/&gt;/g,"\x3e").replace(/&amp;/g,"\x26").replace(/&#([\d]+);/g,function(a,b){return String.fromCharCode(parseInt(b,10))})},escapeSymbol:function(){return String(this.self).replace(/\%/g,"%25").replace(/&/g,"%26").replace(/\+/g,"%2B").replace(/\ /g,"%20").replace(/\//g,"%2F").replace(/\#/g,"%23").replace(/\=/g,"%3D")},toCamelCase:function(){var a=this.self;return 0>a.indexOf("-")&&0>a.indexOf("_")?a:a.replace(/[-_][^-_]/g,function(a){return a.charAt(1).toUpperCase()})},fileExt:function(){return this.self.split(".").pop()},fileName:function(){return this.self.replace(/^.*[\\\/]/,"")},eval:function(){return(new Function("return ("+this.self.replace(/\r/gm,"").replace(/\n/gm,"\\n")+");"))()},get:function(a){var b=this.self||location.href,c="",d=b.indexOf(a+"\x3d");-1!=d&&(d+=a.length+1,e=b.indexOf("\x26",d),-1==e&&(e=b.length),c=b.substring(d,e));return c},random:function(a,b){b=b||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var c="",d,h=0;h<a;h++)d=Math.floor(Math.random()*b.length),c+=b.substring(d,d+1);return(this.self||"")+c}};return new b(a)};d.Number=function(a){var b=function(a){this.self=String(a||"");return this};b.prototype={comma:function(a){var b=this.self;if(!a||1>a)a=3;b=String(b).split(".");b[0]=b[0].replace(new RegExp("(\\d)(?\x3d(\\d{"+a+"})+$)","ig"),"$1,");return b.join(".")},isNumber:function(a){return/^[0-9]{1,20}$/.exec(a)},between:function(a,b){return Math.round(a+Math.random()*(b-a))}};return new b(a)};d.Datetime=function(a){var b=function(a){a&&d.Validate.Number(a)?this.self=new Date(1E3*parseInt(a)):this.self=a?new Date(a):new Date;return this};b.prototype={leapyear:function(){var a=this.self.getFullYear();return 0==a%4&&(0!=a%100||0==a%400)},days:function(){return(new Date(this.self.getFullYear(),this.self.getMonth()+1,0)).getDate()},time:function(){return Math.round(this.self.getTime()/1E3)},format:function(a){var b=this.self,c=b.getFullYear(),d=b.getMonth()+1,k=b.getDate(),p=b.getHours(),v=b.getMinutes(),b=b.getSeconds();a=a.replace("yy",c);a=a.replace("y",c.toString().substr(c.toString().length-2));a=a.replace("mm",("0"+d).substr(d.toString().length-1));a=a.replace("m",d);a=a.replace("dd",("0"+k).substr(k.toString().length-1));a=a.replace("d",k);a=a.replace("hh",("0"+p).substr(p.toString().length-1));a=a.replace("h",p);a=a.replace("ii",("0"+v).substr(v.toString().length-1));a=a.replace("i",v);a=a.replace("ss",("0"+b).substr(b.toString().length-1));return a=a.replace("s",b)},diff:function(a,b){"function"!=typeof b&&(b=function(){});if(!a)return!1;a=Math.round(1E3*parseInt(a));window.setInterval(function(){if((new Date).getTime()>a)b(-1,{d:0,h:0,m:0,s:0});else{var c,d,h,p=Diffms=a-(new Date).getTime();c=Math.floor(Diffms/864E5);Diffms-=864E5*c;d=Math.floor(Diffms/36E5);Diffms-=36E5*d;h=Math.floor(Diffms/6E4);Diffms-=6E4*h;var v=Math.floor(Diffms/1E3);if(-1!=c)var z=c;if(-1!=d)var m=d;if(-1!=h)var l=h,n=v;b(parseInt(p/1E3),{day:z,hour:m,minute:l,second:n})}},1E3)}};return new b(a)};d.Event=function(a){var b=function(a){this.self=a||window.event;return this};b.prototype={stop:function(a){if(this.self)return d.Browser.msie?(2!==a&&(window.event.cancelBubble=!0),1!==a&&(window.event.returnValue=!1)):(2!==a&&this.self.stopPropagation(),1!==a&&this.self.preventDefault()),this},element:function(){if(this.self)return d.Browser.msie?window.event.srcElement:this.self.currentTarget},target:function(){if(this.self)return d.Browser.msie?window.event.srcElement:this.self.target},mouse:function(){if(this.self){if(d.Browser.msie)var a=this.self.x+document.body.scrollLeft,b=this.self.y+document.body.scrollTop;else a=this.self.pageX,b=this.self.pageY;return{x:a,y:b}}},keyboard:function(a,b){this.self&&(-1<a&&this.self.keyCode==a||-1==a)&&b(this.self,this.self.keyCode)}};return new b(a)};d.Validate={is:function(a){return{}.toString.call(a).slice(8,-1)},Array:function(a){return"[object Array]"===Object.prototype.toString.apply(a)},Function:function(a){return"[object Function]"===Object.prototype.toString.apply(a)},Object:function(a){return"[object Object]"===Object.prototype.toString.apply(a)},Date:function(a){return"string"==typeof a?null!=a.match(/^(\d{4})(\-)(\d{1,2})(\-)(\d{1,2})(\s{1})(\d{1,2})(\:)(\d{1,2})/)||null!=a.match(/^(\d{4})(\-)(\d{1,2})(\-)(\d{1,2})/):"[object Date]"===Object.prototype.toString.apply(a)},Number:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},String:function(a){return"string"===typeof a},Defined:function(a){return"undefined"!=typeof a},Empty:function(a){return"undefined"==typeof a||""==a},Boolean:function(a){return"boolean"===typeof a},Window:function(a){return/\[object Window\]/.test(a)},Document:function(a){return/\[object HTMLDocument\]/.test(a)},Element:function(a){return a.tagName?!0:!1},Chinese:function(a,b){return b?2*a.length==a.replace(/[^\x00-\xff]/g,"**").length:a.length!=a.replace(/[^\x00-\xff]/g,"**").length},Safe:function(a){var b;for(b=0;b<a.length;b++)if(-1!="'*%@#^$`~!^\x26*()\x3d+{}\\|{}[];:/?\x3c\x3e,.".indexOf(a.charAt(b)))return!1;return!0},Email:function(a){return/^\s*([A-Za-z0-9_-]+(\.\w+)*@(\w+\.)+\w{2,3})\s*$/.test(a)},URL:function(a){return/^http:\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\:+!]*([^<>])*$/.test(a)},IP:function(a){return/^[0-9.]{1,20}$/.test(a)},Password:function(a){return/^(\w){6,20}$/.test(a)},Color:function(a){return/^#(\w){6}$/.test(a)},ID:function(a){return 18==a.length?d.Validate.Number(a.substring(0,17)):!1},Phone:function(a){return/(?:^0{0,1}1\d{10}$)|(?:^[+](\d){1,3}1\d{10}$)|(?:^0[1-9]{1,2}\d{1}\-{0,1}[2-9]\d{6,7}$)|(?:^\d{7,8}$)|(?:^0[1-9]{1,2}\d{1}\-{0,1}[2-9]\d{6,7}[\-#]{1}\d{1,5}$)/.test(a)},Mobile:function(a){return/^[1][0-9]{10}$/.test(a)}};d.Form=function(a,b,c){var h=function(a,b,c){this.self=a;b&&d("[contenteditable\x3dtrue]",a).each(function(){var b=this.getAttribute("name");b&&(a.elements[b]||d(this).after("textarea",{name:b,hidden:"true"}),a.elements[b].value="html"==c?this.innerHTML:this.innerText)});return this};h.prototype={Reset:function(){this.self.submit()},Submit:function(){this.self.submit()},Serialize:function(a,b,c){a="function"==typeof a?a:encodeURIComponent;b="undefined"!=typeof c?c:b;c={};for(var d=this.self,f=d.elements.length,h=0;h<f;h++){var k=d.elements[h],g=k.name,n=k.value;if(g)switch(k.type){case "select-one":-1<k.selectedIndex&&(k=k[k.selectedIndex],n=a(k.attributes&&k.attributes.value&&!k.attributes.value.specified?k.text:k.value),c=this.Collect(c,g,n));break;case "select-multiple":for(n=0;n<k.length;n++)k[n].selected&&(c=this.Collect(c,g,a(k[n].value)));break;case "radio":k.checked&&(c=this.Collect(c,g,a(k.value)));break;case "checkbox":k.checked&&(c=this.Collect(c,g,a(k.value)));break;default:c=this.Collect(c,g,a(n))}}b&&(c=this.Combine("",b,c));return c},Collect:function(a,b,c){/(\[|\]|5B|5D)/g.test(b)?(a[b]||(a[b]=[]),a[b].push(c)):a[b]=c;return a},Combine:function(a,b,c){for(var d in c){var f=c[d];if("object"==typeof f){var h={},k;for(k in f)f.hasOwnProperty(k)&&(h[d]=f[k],a=this.Combine(a,b,h))}else a+=(a?b:"")+d+"\x3d"+(f||"")}return a},Validate:function(a){a=a||function(a){alert(a)};for(var b=this.self,c=b.elements.length,d=0;d<c;d++){var f=b.elements[d],h=f.getAttribute("data-valid-name");f.getAttribute("placeholder");if(h&&!0!==f.disabled&&!1===this.Element(f,a))return!1}return!0},Element:function(a,b){var c=a.getAttribute("data-valid-name"),f=a.value,h=a.type,g=a.name,m="";if(-1<d.Array(["text","textarea","password","hidden","file"]).indexOf(h)){var g=d.Validate.Empty(d.String(f).trim()),l=d.String(f).length(),n=a.getAttribute("data-valid-empty");"yes"==n&&g&&(m=c+" \u4e0d\u80fd\u4e3a\u7a7a");if("password"==h){var q=a.getAttribute("data-valid-password");q&&d(q).size()&&d(q).value()!=f&&(m=c+" \u8f93\u5165\u6709\u8bef");a.setAttribute("data-valid-empty","yes")}(q=a.getAttribute("data-valid-confirm"))&&d(q).value()!=f&&(m=c+" \u8f93\u5165\u6709\u8bef");q=(q=a.getAttribute("data-valid-accept"))?q.replace(/[,|\uff0c]/ig," "):"";"yes"==n&&q&&-1==d.Array(q.split(" ")).indexOf(a.value.replace(/.*\./,"").toLowerCase())&&(m=c+" \u4e0d\u652f\u6301\u6b64\u7c7b\u578b\u6587\u4ef6");n=a.getAttribute("data-valid-minsize");l<parseInt(n)&&(m=c+" \u672a\u5230\u6700\u5c0f\u957f\u5ea6\uff1a"+n);n=a.getAttribute("data-valid-maxsize");l>parseInt(n)&&(m=c+" \u8d85\u51fa\u6700\u5927\u957f\u5ea6\uff1a"+n);l=a.getAttribute("data-valid-secure");if("yes"==l&&!d.Validate.Safe(f)||"no"==l&&!g&&!d.Validate.Safe(f))m=c+" \u5b58\u5728\u975e\u6cd5\u5b57\u7b26";l=a.getAttribute("data-valid-email");if("yes"==l&&!d.Validate.Email(f)||"no"==l&&!g&&!d.Validate.Email(f))m=c+" \u5e94\u4e3a\u7535\u5b50\u90ae\u4ef6\u5730\u5740";l=a.getAttribute("data-valid-ip");if("yes"==l&&!d.Validate.IP(f)||"no"==l&&!g&&!d.Validate.IP(f))m=c+" \u5e94\u4e3aIP\u5730\u5740";l=a.getAttribute("data-valid-url");if("yes"==l&&!d.Validate.URL(f)||"no"==l&&!g&&!d.Validate.URL(f))m=c+" \u5e94\u4e3aURL\u5730\u5740";l=a.getAttribute("data-valid-number");if("yes"==l&&!d.Validate.Number(f)||"no"==l&&!g&&!d.Validate.Number(f))m=c+" \u5e94\u4e3a\u6570\u5b57";l=a.getAttribute("data-valid-idcard");if("yes"==l&&!d.Validate.ID(f)||"no"==l&&!g&&!d.Validate.ID(f))m=c+" \u5e94\u4e3a\u8eab\u4efd\u8bc1\u53f7\u7801";l=a.getAttribute("data-valid-phone");if("yes"==l&&!d.Validate.Phone(f)||"no"==l&&!g&&!d.Validate.Phone(f))m=c+" \u5e94\u4e3a\u7535\u8bdd\u53f7\u7801";l=a.getAttribute("data-valid-mobile");if("yes"==l&&!d.Validate.Mobile(f)||"no"==l&&!g&&!d.Validate.Mobile(f))m=c+" \u5e94\u4e3a\u624b\u673a\u53f7\u7801";l=a.getAttribute("data-valid-datetime");if("yes"==l&&!d.Validate.Date(f)||"no"==l&&!g&&!d.Validate.Date(f))m=c+" \u5e94\u4e3a\u65e5\u671f\u683c\u5f0f";(g=a.getAttribute("data-valid-regexp"))&&f&&((new RegExp(g)).test(f)||(m=c+" \u683c\u5f0f\u4e0d\u5339\u914d"))}else switch(h){case "select-one":f=d(a).value();""==f&&"yes"==a.getAttribute("data-valid-empty")&&(m=" \u8bf7\u9009\u62e9 "+c);break;case "radio":f=d("input[name\x3d'"+g+"']").value();""==f&&"yes"==a.getAttribute("data-valid-empty")&&(m=" \u8bf7\u9009\u62e9 "+c);break;case "checkbox":g=d("input[name\x3d'"+g+"']");for(l=f=0;l<g.size();l++)g.item(l).checked&&f++;n=a.getAttribute("data-valid-empty");"yes"==n&&0==f&&(m=c+" \u4e0d\u80fd\u4e3a\u7a7a");g=a.getAttribute("data-valid-maxsize");l=a.getAttribute("data-valid-minsize");g&&g<f&&(m=c+" \u6700\u591a\u53ea\u80fd\u9009 "+g+" \u9879");l&&l>f&&(m=c+" \u81f3\u5c11\u9700\u8981\u9009 "+l+" \u9879")}if(m){try{"hidden"!=h&&a.focus()}catch(A){}b(m,a);return!1}return!0}};return new h(a,b,c)};d.toast=function(a,b,c,h){c=c?c:{};var f=c.time||3,g=c.unique||d.String().random(10,"R");b&&(d("#"+g).remove(),d(document.body).append("div",{id:g,className:a,innerHTML:b}),f&&window.setTimeout(function(){d("#"+g).hide();h&&h(d("#"+g).item(0))},1E3*f))};d.Ajax=function(a){this.xmlhttp=null;this.resetData=function(){this.method="GET";this.URLString="";this.encodeURL=!0;this.file=a;this.late=!0;this.failed=!1};this.resetFunctions=function(){this.onLoading=function(){};this.onLoaded=function(){};this.onInteractive=function(){};this.onCompletion=function(){};this.onError=function(){};this.encode=encodeURIComponent&&this.encodeURL?function(a){return encodeURIComponent(a)}:function(a){return a}};this.reset=function(){this.resetFunctions();this.resetData()};this.createAJAX=function(){try{this.xmlhttp=new ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{this.xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")}catch(c){this.xmlhttp=null}}this.xmlhttp||("undefined"!=typeof XMLHttpRequest?this.xmlhttp=new XMLHttpRequest:this.failed=!0)};this.setVar=function(a,c){if("string"==typeof a&&"undefined"==typeof c)this.URLString=a;else{var b=[],d=[];if("object"!=typeof a||c)b[0]=a,d[0]=c;else for(var g in a)b[b.length]=g,d[d.length]=a[g];var k=0==this.URLString.length;for(g=0;g<b.length;g++)this.URLString+=k?"":"\x26",this.URLString+=b[g]+"\x3d"+this.encode(d[g])}};this.setHeader=function(a,c){try{this.xmlhttp.setRequestHeader(a,c)}catch(h){}};this.getURL=function(){return this.file+"?"+this.URLString};this.send=function(a){a||(a="");if(!this.xmlhttp||this.failed)this.onError();else{var b=this;if("GET"==this.method||"GET\x26POST"==this.method)this.xmlhttp.open(this.method,this.file+"?"+this.URLString,this.late);else if("POST"==this.method){this.xmlhttp.open(this.method,this.file,this.late);try{this.xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}catch(h){}}else this.onError();this.xmlhttp.setRequestHeader("X-Requested-With","XMLHttpRequest");this.xmlhttp.onreadystatechange=function(){switch(b.xmlhttp.readyState){case 1:b.onLoading();break;case 2:b.onLoaded();break;case 3:b.onInteractive();break;case 4:b.response=b.xmlhttp.responseText;b.responseXML=b.xmlhttp.responseXML;try{var a=b.xmlhttp.status}catch(f){a="Trouble accessing it"}if(4==b.xmlhttp.readyState||"200"==a)b.onCompletion();else b.onError();b.URLString=""}};"POST"==this.method?this.xmlhttp.send(this.URLString):"GET"==this.method?this.xmlhttp.send(null):"GET\x26POST"==this.method&&this.xmlhttp.send(a)}};this.reset();this.createAJAX()};d.script=function(a,b,c,h){1==arguments.length&&(b={},c=function(){});2==arguments.length&&(c=arguments[1]||function(){},b=b||{});3==arguments.length&&(c=arguments[1]||function(){},h=arguments[2],b=b||{});b.type="text/javascript";b.src=a;h=h||document.querySelector("head");d(h).append("script",b).change().bind("load",function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||this.executed||(this.executed=!0,c&&c(this))})};d.assets=function(a,b,c){"object"!=typeof a&&(a=[a]);c=c||document.querySelector("head");var h=[],f;for(f in a){var g,k={};switch(d.String(a[f]).fileExt()){case "js":g="script";k={type:"text/javascript",src:a[f]};break;case "css":g="link";k={rel:"stylesheet",type:"text/css",href:a[f]};break;default:g="img",k={src:a[f]}}element=d(c).append(g,k).change();h.push(element.item(0))}b&&element.bind("load",function(){b.apply(c,h)})};d.jsonp=function(a,b,c){"function"==typeof b&&(c=b,b={});b=b||{};c=c||function(){};var h=b.autocall?b.autocall:"cross"+Math.random().toString(16).substring(2),f=document.querySelector("head");0!=b.autocall&&"?"==a.slice(-1)&&(a=a.substr(0,a.length-1)+h);b.type="text/javascript";b.src=a;var g=d(f).append("script",b).change();window[h]=window[h]||function(a){c&&c(a);window[h]=void 0;try{delete window[h]}catch(p){}g.remove()}};d.lazy=function(a){a=a||"raw";var b=function(){for(var b=d.getViewportSize(),h=document.querySelectorAll("img["+a+"]"),f=h.length,g=0;g<f;g++){var k=h[g],p=d.getClinetRect(k);0<=p.bottom&&0<=p.right&&p.top<=b.height&&p.left<=b.width&&(k.src=k.getAttribute(a),k.removeAttribute(a))}return f};b();d(window).bind("scroll",b)};d.find=function(a,b){return(b||document).querySelectorAll(a)};d.extend=function(a){for(var b in a)d.init.prototype[b]=a[b]};d.create=function(a,b){"string"==typeof a&&(a=document.createElement(a));b=b||{};for(var c in b)/[A-Z]/.test(c)?a[c]=b[c]:a.setAttribute(c,b[c]);return a};d.init=function(a,b){this.self="string"==typeof a?d.find(a,b):[a]};d.init.prototype={last:null,size:function(){return this.self.length},item:function(a,b){var c=this.size(),c=0<=a?a<=c?this.self[a]:null:Math.abs(a)<=c?this.self[c+a]:null;b&&(this.self=[c]);return b?this:c},hide:function(a){this.each(function(){this.style.display="none";a&&a.call(this)});return this},show:function(a){this.each(function(){this.style.display="";a&&a.call(this)});return this},toggle:function(a){this.each(function(){this.style.display=null===this.offsetParent?"":"none";a&&a.call(this,"none"!=this.style.display)});return this},exist:function(a){var b=!1;this.each(function(){b=this.contains(a)});return b},value:function(a,b){if("undefined"!=typeof a)return this.each(function(){var c=this.length;switch(this.type){case "select-one":for(var f=0;f<c;f++)if(this[f].value==a){this.selectedIndex=f;break}break;case "select-multiple":for(f=0;f<c;f++)-1!==d.Array(a).indexOf(this[f].value)?this[f].selected=!0:this[f].selected=!1;break;case "radio":case "checkbox":d.Validate.Array(a)&&-1!==d.Array(a).indexOf(this.value)||this.value==a?this.checked=!0:this.checked=!1;break;default:"file"!=this.type&&(this.value=b?this.value+a:a)}}),this;var c=[];this.each(function(){var a=this.length;switch(this.type){case "select-one":c.push(-1<this.selectedIndex?this[this.selectedIndex].value:null);break;case "select-multiple":for(var b=0;b<a;b++)this[b].selected&&c.push(this[b].value);break;case "radio":case "checkbox":this.checked&&c.push(this.value);break;default:c.push(this.value)}});return 1==this.size()?c[0]:c},text:function(a,b){if("undefined"!=typeof a)return this.each(function(){var c=this.length;switch(this.type){case "select-one":for(var f=0;f<c;f++)if(this[f].text==a){this.selectedIndex=f;"undefined"!=typeof b&&(this[f].text=b);break}break;case "select-multiple":for(f=0;f<c;f++)-1!==d.Array(a).indexOf(this[f].text)?(this[f].selected=!0,"undefined"!=typeof b&&(this[f].text=b)):this[f].selected=!1}}),this;var c=[];this.each(function(){var a=this.length;switch(this.type){case "select-one":a&&-1<this.selectedIndex&&(c=this[this.selectedIndex].text);break;case "select-multiple":for(var b=0;b<a;b++)this[b].selected&&c.push(this[b].text)}});return c},html:function(a,b){return"undefined"!=typeof a?(this.each(function(){this.innerHTML=b?this.innerHTML+a:a}),this):this.self[0].innerHTML},attr:function(a,b){if("string"==typeof a&&"undefined"==typeof b){if(0==this.size())return null;if(t=this.self[0])return t.hasAttribute(a)?t.getAttribute(a):t[a]}if(a||b){if("string"==typeof a){var c={};c[a]=b;a=c}this.each(function(){for(var b in a)this.setAttribute(b,a[b])});return this}},style:function(a,b){if("string"==typeof a&&"undefined"==typeof b){if(0==this.size())return null;var c=this.self[0];return function(){var a=document.defaultView;return new Function("el","style",["style.indexOf('-')\x3e-1 \x26\x26 (style\x3dstyle.replace(/-(\\w)/g,function(m,a){return a.toUpperCase()}));style\x3d\x3d'float' \x26\x26 (style\x3d'",a?"cssFloat":"styleFloat","');return el.style[style] || ",a?"window.getComputedStyle(el, null)[style]":"el.currentStyle[style]"," || null;"].join(""))}()(c,a)}if(a||b)return"string"==typeof a&&(c={},c[a]=b,a=c),this.each(function(){for(var b in a)this.style[b]=a[b]}),this},each:function(a){for(var b=this.size(),c=this.self,d=0;d<b&&!1!==a.call(c[d],d);d++);return this},filter:function(a){var b=[];this.each(function(c){a.call(this,this,c)&&b.push(this)});this.self=b;return this},bind:function(a,b){this.each(function(c){var d=this,f=function(a){return b.call(d,c,a)};!this.Listeners&&(this.Listeners=[]);this.Listeners.push({e:a,fn:f});this.addEventListener?this.addEventListener(a,f,!1):this.attachEvent?this.attachEvent("on"+a,f):this["on"+a]=f});return this},live:function(a,b,c){document.addEventListener(a,function(a){var d="string"==typeof b?document.querySelectorAll(b):b;if(d){for(var g=a.target,h=-1;g&&-1===(h=Array.prototype.indexOf.call(d,g));)g=g.parentElement;-1<h&&c.call(g,h,a)}})},unbind:function(a){this.each(function(b){if(this.Listeners){for(b=0;b<this.Listeners.length;b++)this.removeEventListener?this.removeEventListener(this.Listeners[b].e,this.Listeners[b].fn,!1):this.detachEvent?this.detachEvent("on"+this.Listeners[b].e,this.Listeners[b].fn):this["on"+a]=null;delete this.Listeners}});return this},event:function(a){this.each(function(){try{if(document.createEvent){var b=document.createEvent("MouseEvents");b.initEvent(a,!0,!0);this.dispatchEvent(b)}else if(document.createEventObject)b=document.createEventObject(),this.fireEvent("on"+a,b);else this["on"+a]()}catch(c){}});return this},focus:function(a,b){this.each(function(c){this.focus();if("function"==typeof a)return a.call(this,c,b)});return this},blur:function(a,b){this.each(function(c){this.blur();if("function"==typeof a)return a.call(this,c,b)});return this},submit:function(a,b){this.each(function(c){("function"==typeof a&&a.call(this,c,b)||"undefined"==typeof a)&&this.submit();return!1});return this},reset:function(a,b){this.each(function(c){("function"==typeof a&&a.call(this,c,b)||"undefined"==typeof a)&&this.reset();return!1});return this},disabled:function(){this.each(function(){this.disabled=!0});return this},enabled:function(){this.each(function(){this.disabled=!1});return this},checked:function(a){this.each(function(){d.Validate.Boolean(a)?this.checked=a:this.checked=this.checked?!1:!0});return this},before:function(a,b){var c=[];this.each(function(){c.push(a=d.create(a,b));this.parentNode.insertBefore(a,this)});this.last=c;return this},after:function(a,b){var c=[];this.each(function(){c.push(a=d.create(a,b));this.parentNode.insertBefore(a,this.nextSibling)});this.last=c;return this},append:function(a,b){var c=[];this.each(function(){c.push(a=d.create(a,b));this.appendChild(a)});this.last=c;return this},replace:function(a,b){var c=[];this.each(function(){c.push(a=d.create(a,b));this.replaceNode(a)});this.last=c;return this},swap:function(a,b){var c=[];this.each(function(){c.push(a=d.create(a,b));this.swapNode(a)});this.last=c;return this},change:function(){this.self=this.last;return this},adjacent:function(a,b){this.each(function(){"string"==typeof b?this.insertAdjacentHTML(a,b):this.insertAdjacentElement(a,b)});return this},remove:function(a){this.each(function(){"string"==typeof a?this.removeAttribute(a):this.parentNode.removeChild(this)});return this},parent:function(a){var b=[],c=d.Validate.Number(a)?parseInt(a):1;this.each(function(){for(var a=this,d=0;d<c;d++)a=a.parentNode;b.push(a)});this.self=b;return this},prev:function(a,b){if(0==this.size())return null;var c=this.self[0],c=a?c.previousElementSibling:c.previousSibling;return b?(this.self=[c],this):c},next:function(a,b){if(0==this.size())return null;var c=this.self[0],c=a?c.nextElementSibling:c.nextSibling;return b?(this.self=[c],this):c},position:function(){if(0==this.size())return null;for(var a=this.self[0],b=a.offsetWidth,c=a.offsetHeight,d=a.offsetTop,f=a.offsetLeft;a=a.offsetParent;)d+=a.offsetTop,f+=a.offsetLeft;return{width:b,height:c,top:d,left:f}}};x.R=d})(window,document,void 0);